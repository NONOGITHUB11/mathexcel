<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MathExcel ‚Äî Mon Espace</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --purple: #6C3FC5;
      --purple-light: #8B62D9;
      --purple-dark: #4A2A8F;
      --purple-glow: rgba(108, 63, 197, 0.25);
      --gold: #F5C842;
      --green: #2ECC8A;
      --red: #FF6B6B;
      --blue: #4FC3F7;
      --bg: #0E0B1A;
      --surface: #16112A;
      --surface2: #1E1735;
      --surface3: #251E3E;
      --text: #F0EBF8;
      --text-muted: #9B8FBB;
      --border: rgba(108, 63, 197, 0.2);
      --radius: 16px;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(108,63,197,0.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(108,63,197,0.04) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none;
      z-index: 0;
    }

    /* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
    .sidebar {
      position: fixed;
      top: 0; left: 0;
      width: 240px;
      height: 100vh;
      background: var(--surface);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      padding: 28px 0;
      z-index: 10;
    }

    .sidebar-logo {
      padding: 0 24px 28px;
      border-bottom: 1px solid var(--border);
    }
    .logo-row {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .logo-icon {
      width: 40px; height: 40px;
      background: linear-gradient(135deg, var(--purple), var(--purple-light));
      border-radius: 12px;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Syne', sans-serif;
      font-weight: 800; font-size: 15px; color: white;
      box-shadow: 0 4px 12px var(--purple-glow);
      flex-shrink: 0;
    }
    .logo-text { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 18px; }

    .nav {
      flex: 1;
      padding: 20px 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-section {
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 1.5px;
      color: var(--text-muted);
      text-transform: uppercase;
      padding: 16px 12px 6px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-muted);
      transition: all 0.15s;
      border: 1px solid transparent;
      text-decoration: none;
    }
    .nav-item:hover { background: var(--surface2); color: var(--text); }
    .nav-item.active {
      background: linear-gradient(135deg, rgba(108,63,197,0.25), rgba(139,98,217,0.15));
      color: var(--text);
      border-color: var(--border);
    }
    .nav-item .icon { font-size: 16px; width: 20px; text-align: center; }

    .sidebar-bottom {
      padding: 20px 12px 0;
      border-top: 1px solid var(--border);
      margin: 0 12px;
    }
    .student-card {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: var(--surface2);
      border-radius: 10px;
      border: 1px solid var(--border);
    }
    .student-avatar {
      width: 34px; height: 34px;
      background: linear-gradient(135deg, var(--purple), var(--gold));
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Syne', sans-serif;
      font-weight: 700; font-size: 13px; color: white;
      flex-shrink: 0;
    }
    .student-info { flex: 1; min-width: 0; }
    .student-name { font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .student-role { font-size: 11px; color: var(--text-muted); }
    .logout-btn {
      background: none; border: none; color: var(--text-muted);
      cursor: pointer; font-size: 16px; padding: 4px;
      border-radius: 6px; transition: color 0.15s;
    }
    .logout-btn:hover { color: var(--red); }

    /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
    .main {
      margin-left: 240px;
      min-height: 100vh;
      position: relative;
      z-index: 1;
    }

    .topbar {
      padding: 24px 32px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(14,11,26,0.8);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 5;
    }
    .topbar-left h1 {
      font-family: 'Syne', sans-serif;
      font-size: 22px;
      font-weight: 800;
    }
    .topbar-left p { font-size: 13px; color: var(--text-muted); margin-top: 2px; }

    .week-badge {
      background: linear-gradient(135deg, var(--purple-dark), var(--purple));
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 8px 16px;
      font-size: 13px;
      font-weight: 500;
    }

    /* ‚îÄ‚îÄ CONTENT PANELS ‚îÄ‚îÄ */
    .panel { display: none; }
    .panel.active { display: block; }

    .content { padding: 32px; }

    /* ‚îÄ‚îÄ STATS ROW ‚îÄ‚îÄ */
    .stats-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 28px;
    }
    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      position: relative;
      overflow: hidden;
    }
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
    }
    .stat-card.purple::before { background: linear-gradient(90deg, var(--purple), var(--purple-light)); }
    .stat-card.gold::before   { background: linear-gradient(90deg, var(--gold), #ffaa00); }
    .stat-card.green::before  { background: linear-gradient(90deg, var(--green), #00d4aa); }
    .stat-card.blue::before   { background: linear-gradient(90deg, var(--blue), #0080c0); }

    .stat-label { font-size: 11px; font-weight: 600; letter-spacing: 1px; color: var(--text-muted); text-transform: uppercase; }
    .stat-value { font-family: 'Syne', sans-serif; font-size: 28px; font-weight: 800; margin: 8px 0 4px; }
    .stat-sub   { font-size: 12px; color: var(--text-muted); }

    /* ‚îÄ‚îÄ GRID 2 COLS ‚îÄ‚îÄ */
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
    .grid-3 { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 20px; }

    /* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 24px;
    }
    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .card-title {
      font-family: 'Syne', sans-serif;
      font-size: 15px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .card-action {
      font-size: 12px;
      color: var(--purple-light);
      cursor: pointer;
      text-decoration: none;
    }
    .card-action:hover { text-decoration: underline; }

    /* ‚îÄ‚îÄ SEMAINE / PLANNING ‚îÄ‚îÄ */
    .week-plan {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .day-row {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      background: var(--surface2);
      border-radius: 10px;
      border: 1px solid transparent;
      transition: border-color 0.15s;
    }
    .day-row:hover { border-color: var(--border); }
    .day-row.today { border-color: var(--purple); background: rgba(108,63,197,0.08); }

    .day-label {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      text-transform: uppercase;
      width: 32px;
      flex-shrink: 0;
      padding-top: 2px;
    }
    .day-row.today .day-label { color: var(--purple-light); }

    .day-tasks { flex: 1; display: flex; flex-direction: column; gap: 4px; }
    .task-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--surface3);
      border-radius: 6px;
      padding: 4px 10px;
      font-size: 12px;
      color: var(--text);
    }
    .task-pill.cours { background: rgba(108,63,197,0.2); color: var(--purple-light); }
    .task-pill.exo   { background: rgba(46,204,138,0.15); color: var(--green); }
    .task-pill.revise{ background: rgba(245,200,66,0.15); color: var(--gold); }
    .task-pill .dot  { width: 6px; height: 6px; border-radius: 50%; background: currentColor; flex-shrink: 0; }

    /* ‚îÄ‚îÄ COURS LIST ‚îÄ‚îÄ */
    .chapter-list { display: flex; flex-direction: column; gap: 8px; }
    .chapter-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 16px;
      background: var(--surface2);
      border-radius: 12px;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.15s;
      text-decoration: none;
      color: var(--text);
    }
    .chapter-item:hover { background: var(--surface3); border-color: var(--purple); transform: translateX(4px); }

    .chapter-num {
      width: 36px; height: 36px;
      background: linear-gradient(135deg, var(--purple-dark), var(--purple));
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Syne', sans-serif;
      font-size: 13px; font-weight: 700; color: white;
      flex-shrink: 0;
    }
    .chapter-info { flex: 1; }
    .chapter-name { font-size: 14px; font-weight: 600; margin-bottom: 2px; }
    .chapter-meta { font-size: 12px; color: var(--text-muted); }

    .chapter-status {
      font-size: 11px;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: 20px;
    }
    .status-done    { background: rgba(46,204,138,0.15); color: var(--green); }
    .status-current { background: rgba(108,63,197,0.2);  color: var(--purple-light); }
    .status-locked  { background: var(--surface3); color: var(--text-muted); }

    .chapter-arrow { color: var(--text-muted); font-size: 14px; }

    /* ‚îÄ‚îÄ PROGRESS BAR ‚îÄ‚îÄ */
    .progress-wrap { margin-top: 8px; }
    .progress-label { display: flex; justify-content: space-between; font-size: 12px; color: var(--text-muted); margin-bottom: 6px; }
    .progress-bar { height: 6px; background: var(--surface3); border-radius: 3px; overflow: hidden; }
    .progress-fill { height: 100%; border-radius: 3px; background: linear-gradient(90deg, var(--purple), var(--purple-light)); transition: width 1s ease; }

    /* ‚îÄ‚îÄ REPLAY LIST ‚îÄ‚îÄ */
    .replay-list { display: flex; flex-direction: column; gap: 10px; }
    .replay-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 16px;
      background: var(--surface2);
      border-radius: 12px;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.15s;
      text-decoration: none;
      color: var(--text);
    }
    .replay-item:hover { border-color: var(--purple-light); background: var(--surface3); }

    .replay-thumb {
      width: 48px; height: 36px;
      background: linear-gradient(135deg, var(--purple-dark), var(--surface3));
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
      border: 1px solid var(--border);
    }
    .replay-info { flex: 1; }
    .replay-title { font-size: 14px; font-weight: 500; margin-bottom: 2px; }
    .replay-meta  { font-size: 12px; color: var(--text-muted); }
    .replay-duration {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      background: var(--surface3);
      padding: 4px 10px;
      border-radius: 20px;
    }

    /* ‚îÄ‚îÄ EVAL SECTION ‚îÄ‚îÄ */
    .eval-list { display: flex; flex-direction: column; gap: 10px; }
    .eval-item {
      padding: 16px;
      background: var(--surface2);
      border-radius: 12px;
      border: 1px solid var(--border);
    }
    .eval-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
    .eval-name { font-size: 14px; font-weight: 600; }
    .eval-date { font-size: 12px; color: var(--text-muted); }
    .eval-note {
      font-family: 'Syne', sans-serif;
      font-size: 22px;
      font-weight: 800;
    }
    .eval-note.good { color: var(--green); }
    .eval-note.ok   { color: var(--gold); }
    .eval-note.bad  { color: var(--red); }
    .eval-comment   { font-size: 12px; color: var(--text-muted); margin-top: 8px; line-height: 1.5; }
    .eval-tags { display: flex; gap: 6px; margin-top: 8px; flex-wrap: wrap; }
    .eval-tag {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 5px;
      background: var(--surface3);
      color: var(--text-muted);
    }

    /* ‚îÄ‚îÄ CALENDAR IFRAME ‚îÄ‚îÄ */
    .calendar-wrap {
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid var(--border);
      background: var(--surface2);
    }
    .calendar-placeholder {
      height: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      color: var(--text-muted);
      font-size: 14px;
    }
    .calendar-placeholder .big-icon { font-size: 48px; }

    /* ‚îÄ‚îÄ NEXT SESSION ‚îÄ‚îÄ */
    .next-session {
      background: linear-gradient(135deg, rgba(108,63,197,0.2), rgba(139,98,217,0.1));
      border: 1px solid var(--purple);
      border-radius: 14px;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }
    .session-icon { font-size: 32px; }
    .session-info { flex: 1; }
    .session-title { font-family: 'Syne', sans-serif; font-size: 16px; font-weight: 700; }
    .session-time  { font-size: 13px; color: var(--text-muted); margin-top: 4px; }
    .session-join  {
      background: linear-gradient(135deg, var(--purple), var(--purple-light));
      color: white;
      border: none;
      border-radius: 10px;
      padding: 10px 20px;
      font-family: 'Syne', sans-serif;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.15s, box-shadow 0.15s;
      box-shadow: 0 4px 12px var(--purple-glow);
    }
    .session-join:hover { transform: translateY(-2px); box-shadow: 0 8px 20px var(--purple-glow); }

    /* ‚îÄ‚îÄ OBJECTIFS ‚îÄ‚îÄ */
    .obj-list { display: flex; flex-direction: column; gap: 10px; }
    .obj-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 14px;
      background: var(--surface2);
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 13px;
    }
    .obj-check {
      width: 22px; height: 22px;
      border-radius: 6px;
      display: flex; align-items: center; justify-content: center;
      font-size: 12px;
      flex-shrink: 0;
      cursor: pointer;
      transition: all 0.15s;
    }
    .obj-check.done   { background: rgba(46,204,138,0.2); color: var(--green); border: 1px solid var(--green); }
    .obj-check.pending{ background: var(--surface3); border: 1px solid var(--border); color: transparent; }
    .obj-check.pending:hover { border-color: var(--purple-light); }
    .obj-text.done { text-decoration: line-through; color: var(--text-muted); }

    /* ‚îÄ‚îÄ MOBILE ‚îÄ‚îÄ */
    @media (max-width: 768px) {
      .sidebar { width: 60px; }
      .sidebar .logo-text, .sidebar .nav-section, .sidebar .nav-item span, .sidebar .student-info { display: none; }
      .main { margin-left: 60px; }
      .stats-row { grid-template-columns: 1fr 1fr; }
      .grid-2, .grid-3 { grid-template-columns: 1fr; }
      .content { padding: 20px; }
      .topbar { padding: 16px 20px; }
    }
  </style>
</head>
<body>

<!-- ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ -->
<aside class="sidebar">
  <div class="sidebar-logo">
    <div class="logo-row">
      <div class="logo-icon">M‚àë</div>
      <span class="logo-text">MathExcel</span>
    </div>
  </div>

  <nav class="nav">
    <div class="nav-section">Mon espace</div>
    <a class="nav-item active" onclick="showPanel('dashboard')" href="#">
      <span class="icon">üè†</span><span>Tableau de bord</span>
    </a>
    <a class="nav-item" onclick="showPanel('cours')" href="#">
      <span class="icon">üìö</span><span>Mes cours</span>
    </a>
    <a class="nav-item" onclick="showPanel('replays')" href="#">
      <span class="icon">üé•</span><span>Replays</span>
    </a>
    <a class="nav-item" onclick="showPanel('evals')" href="#">
      <span class="icon">üìä</span><span>Mes √©vals</span>
    </a>

    <div class="nav-section">Organisation</div>
    <a class="nav-item" onclick="showPanel('agenda')" href="#">
      <span class="icon">üìÖ</span><span>Mon agenda</span>
    </a>
    <a class="nav-item" onclick="showPanel('objectifs')" href="#">
      <span class="icon">üéØ</span><span>Objectifs</span>
    </a>
  </nav>

  <div class="sidebar-bottom">
    <div class="student-card">
      <div class="student-avatar" id="sidebarAvatar">T</div>
      <div class="student-info">
        <div class="student-name" id="sidebarName">Thomas</div>
        <div class="student-role">Terminale Sp√©</div>
      </div>
      <button class="logout-btn" onclick="logout()" title="D√©connexion">‚Ü™</button>
    </div>
  </div>
</aside>

<!-- ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ -->
<main class="main">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="topbar-left">
      <h1 id="panelTitle">Tableau de bord</h1>
      <p id="panelSub">Bienvenue dans ton espace d'excellence üéØ</p>
    </div>
    <div class="week-badge" id="weekBadge">Semaine du lundi</div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê PANEL: DASHBOARD ‚ïê‚ïê‚ïê‚ïê -->
  <div class="panel active content" id="panel-dashboard">

    <!-- Stats -->
    <div class="stats-row">
      <div class="stat-card purple">
        <div class="stat-label">S√©ances</div>
        <div class="stat-value">12</div>
        <div class="stat-sub">depuis septembre</div>
      </div>
      <div class="stat-card gold">
        <div class="stat-label">Moyenne</div>
        <div class="stat-value">14,5</div>
        <div class="stat-sub">+2,5 pts ce trimestre</div>
      </div>
      <div class="stat-card green">
        <div class="stat-label">Chapitres</div>
        <div class="stat-value">4/12</div>
        <div class="stat-sub">termin√©s</div>
      </div>
      <div class="stat-card blue">
        <div class="stat-label">Exercices</div>
        <div class="stat-value">47</div>
        <div class="stat-sub">r√©alis√©s</div>
      </div>
    </div>

    <!-- Prochain cours -->
    <div class="next-session">
      <div class="session-icon">üìπ</div>
      <div class="session-info">
        <div class="session-title">Prochain cours ‚Äî Limites de suites</div>
        <div class="session-time">Samedi 1er mars ¬∑ 14h00 ‚Äì 15h30 ¬∑ Google Meet</div>
      </div>
      <button class="session-join" onclick="alert('Lien Google Meet √† configurer dans le code !')">Rejoindre ‚Üí</button>
    </div>

    <div class="grid-3">
      <!-- Planning semaine -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">üìÖ Planning de la semaine</div>
          <a class="card-action" onclick="showPanel('agenda')">Voir agenda ‚Üí</a>
        </div>
        <div class="week-plan" id="weekPlan">
          <!-- Filled by JS -->
        </div>
      </div>

      <!-- Progression -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">üìà Progression</div>
        </div>
        <div style="display:flex;flex-direction:column;gap:16px;">
          <div>
            <div class="progress-label"><span>Cours vus</span><span>4/12</span></div>
            <div class="progress-bar"><div class="progress-fill" style="width:33%"></div></div>
          </div>
          <div>
            <div class="progress-label"><span>Exercices</span><span>47/120</span></div>
            <div class="progress-bar"><div class="progress-fill" style="width:39%"></div></div>
          </div>
          <div>
            <div class="progress-label"><span>Programme annuel</span><span>28%</span></div>
            <div class="progress-bar"><div class="progress-fill" style="width:28%"></div></div>
          </div>
        </div>

        <div style="margin-top:20px;">
          <div class="card-title" style="margin-bottom:12px;">üéØ Objectifs semaine</div>
          <div class="obj-list" id="quickObj">
            <!-- Filled by JS -->
          </div>
        </div>
      </div>
    </div>

    <!-- Derniers replays -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">üé• Derniers replays</div>
        <a class="card-action" onclick="showPanel('replays')">Voir tous ‚Üí</a>
      </div>
      <div class="replay-list" id="dashReplays"><!-- filled by JS --></div>
    </div>

  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê PANEL: COURS ‚ïê‚ïê‚ïê‚ïê -->
  <div class="panel content" id="panel-cours">
    <div class="card">
      <div class="card-header">
        <div class="card-title">üìö Programme de Terminale Sp√© Maths</div>
        <span style="font-size:13px;color:var(--text-muted);">4 chapitres termin√©s sur 12</span>
      </div>
      <div class="progress-wrap" style="margin-bottom:24px;">
        <div class="progress-bar"><div class="progress-fill" style="width:33%"></div></div>
      </div>
      <div class="chapter-list" id="chapterList"><!-- filled by JS --></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê PANEL: REPLAYS ‚ïê‚ïê‚ïê‚ïê -->
  <div class="panel content" id="panel-replays">
    <div class="card">
      <div class="card-header">
        <div class="card-title">üé• Replays de tes s√©ances</div>
        <span style="font-size:13px;color:var(--text-muted);">12 s√©ances enregistr√©es</span>
      </div>
      <div class="replay-list" id="allReplays"><!-- filled by JS --></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê PANEL: EVALS ‚ïê‚ïê‚ïê‚ïê -->
  <div class="panel content" id="panel-evals">
    <div class="stats-row" style="grid-template-columns:repeat(3,1fr)">
      <div class="stat-card purple">
        <div class="stat-label">Moyenne actuelle</div>
        <div class="stat-value">14,5</div>
        <div class="stat-sub">Trimestre en cours</div>
      </div>
      <div class="stat-card green">
        <div class="stat-label">Meilleure note</div>
        <div class="stat-value">17</div>
        <div class="stat-sub">D√©rivation</div>
      </div>
      <div class="stat-card gold">
        <div class="stat-label">Progression</div>
        <div class="stat-value">+2,5</div>
        <div class="stat-sub">pts depuis sept.</div>
      </div>
    </div>
    <div class="card">
      <div class="card-header">
        <div class="card-title">üìä Historique des √©valuations</div>
      </div>
      <div class="eval-list" id="evalList"><!-- filled by JS --></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê PANEL: AGENDA ‚ïê‚ïê‚ïê‚ïê -->
  <div class="panel content" id="panel-agenda">
    <div class="next-session" style="margin-bottom:20px;">
      <div class="session-icon">üìπ</div>
      <div class="session-info">
        <div class="session-title">Prochain cours ‚Äî Limites de suites</div>
        <div class="session-time">Samedi 1er mars ¬∑ 14h00 ‚Äì 15h30 ¬∑ Google Meet</div>
      </div>
      <button class="session-join" onclick="alert('Lien Meet √† configurer !')">Rejoindre ‚Üí</button>
    </div>
    <div class="card">
      <div class="card-header">
        <div class="card-title">üìÖ Google Agenda ‚Äî Synchronis√©</div>
        <a class="card-action" href="https://calendar.google.com" target="_blank">Ouvrir Google Agenda ‚Üí</a>
      </div>
      <div class="calendar-wrap">
        <!-- 
          REMPLACE l'URL ci-dessous par l'URL d'int√©gration de ton Google Agenda.
          Va sur Google Agenda ‚Üí Param√®tres ‚Üí ton agenda ‚Üí "Int√©grer l'agenda" ‚Üí copie le lien iframe.
        -->
        <div class="calendar-placeholder">
          <div class="big-icon">üìÖ</div>
          <div style="text-align:center;">
            <strong style="color:var(--text);">Google Agenda √† connecter</strong><br/>
            Remplace l'URL dans le code par ton lien d'int√©gration Google Agenda
          </div>
          <button class="session-join" onclick="alert('Voir le README pour connecter Google Agenda')">Comment connecter ?</button>
        </div>
        <!-- 
        <iframe 
          src="TON_URL_GOOGLE_AGENDA_ICI"
          style="border:0;width:100%;height:500px;"
          frameborder="0"
          scrolling="no">
        </iframe>
        -->
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê PANEL: OBJECTIFS ‚ïê‚ïê‚ïê‚ïê -->
  <div class="panel content" id="panel-objectifs">
    <div class="grid-2">
      <div class="card">
        <div class="card-header">
          <div class="card-title">üéØ Objectifs de la semaine</div>
        </div>
        <div class="obj-list" id="objList"><!-- filled by JS --></div>
      </div>
      <div class="card">
        <div class="card-header">
          <div class="card-title">üí¨ Message de ton coach</div>
        </div>
        <div style="background:var(--surface2);border-radius:12px;padding:16px;border:1px solid var(--border);font-size:14px;line-height:1.7;color:var(--text-muted);">
          <p style="color:var(--text);font-weight:500;margin-bottom:8px;">Semaine du 24 f√©vrier</p>
          <p>Beau travail sur la r√©currence la semaine derni√®re ! Cette semaine on attaque les limites. Concentre-toi d'abord sur l'intuition avant de regarder les exercices.</p>
          <p style="margin-top:12px;">Objectif : finir les exercices niveau 1 et 2 du chapitre Limites avant samedi. On corrigera ensemble en cours. üí™</p>
        </div>
        <div style="margin-top:16px;padding:12px 14px;background:rgba(108,63,197,0.1);border-radius:10px;border:1px solid var(--border);font-size:13px;color:var(--text-muted);">
          üìû Des questions ? <strong style="color:var(--purple-light);">WhatsApp ton coach</strong> directement.
        </div>
      </div>
    </div>
  </div>

</main>

<script>
// ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const CHAPTERS = [
  { num: 1,  name: "Suites ‚Äî Raisonnement par r√©currence", meta: "Vid√©o ¬∑ Fiche ¬∑ 15 exercices", status: "done",    url: "#" },
  { num: 2,  name: "Suites ‚Äî Limites",                     meta: "Vid√©o ¬∑ Fiche ¬∑ 18 exercices", status: "current", url: "#" },
  { num: 3,  name: "Suites ‚Äî Op√©rations sur les limites",  meta: "Vid√©o ¬∑ Fiche ¬∑ 12 exercices", status: "locked",  url: "#" },
  { num: 4,  name: "D√©rivation",                           meta: "Vid√©o ¬∑ Fiche ¬∑ 20 exercices", status: "done",    url: "#" },
  { num: 5,  name: "Fonction exponentielle",               meta: "Vid√©o ¬∑ Fiche ¬∑ 16 exercices", status: "locked",  url: "#" },
  { num: 6,  name: "Fonctions trigonom√©triques",           meta: "Vid√©o ¬∑ Fiche ¬∑ 14 exercices", status: "locked",  url: "#" },
  { num: 7,  name: "Produit scalaire",                     meta: "Vid√©o ¬∑ Fiche ¬∑ 10 exercices", status: "locked",  url: "#" },
  { num: 8,  name: "G√©om√©trie rep√©r√©e",                    meta: "Vid√©o ¬∑ Fiche ¬∑ 12 exercices", status: "locked",  url: "#" },
  { num: 9,  name: "Probabilit√©s conditionnelles",         meta: "Vid√©o ¬∑ Fiche ¬∑ 15 exercices", status: "done",    url: "#" },
  { num: 10, name: "Variables al√©atoires",                 meta: "Vid√©o ¬∑ Fiche ¬∑ 14 exercices", status: "done",    url: "#" },
  { num: 11, name: "Loi binomiale",                        meta: "Vid√©o ¬∑ Fiche ¬∑ 12 exercices", status: "locked",  url: "#" },
  { num: 12, name: "Algorithmique Python",                 meta: "Vid√©o ¬∑ Fiche ¬∑ 8 exercices",  status: "locked",  url: "#" },
];

const REPLAYS = [
  { title: "S√©ance 12 ‚Äî Limites infinies",             date: "22 f√©v 2025", duration: "1h28", icon: "üé•" },
  { title: "S√©ance 11 ‚Äî R√©currence (correction DS)",   date: "15 f√©v 2025", duration: "1h35", icon: "üé•" },
  { title: "S√©ance 10 ‚Äî R√©currence avanc√©e",           date: "8 f√©v 2025",  duration: "1h22", icon: "üé•" },
  { title: "S√©ance 9 ‚Äî Introduction aux suites",       date: "1 f√©v 2025",  duration: "1h30", icon: "üé•" },
  { title: "S√©ance 8 ‚Äî Variables al√©atoires",          date: "25 jan 2025", duration: "1h18", icon: "üé•" },
  { title: "S√©ance 7 ‚Äî Probas conditionnelles",        date: "18 jan 2025", duration: "1h27", icon: "üé•" },
];

const EVALS = [
  { name: "DS Suites ‚Äî R√©currence", date: "20 f√©v 2025", note: 15, max: 20,
    comment: "Tr√®s bonne ma√Ætrise de la structure. Attention √† la phrase de conclusion de l'h√©r√©dit√© qui √©tait incompl√®te.",
    tags: ["R√©currence", "Suites", "R√©daction"], noteClass: "good" },
  { name: "Interrogation ‚Äî Probabilit√©s", date: "5 f√©v 2025", note: 13, max: 20,
    comment: "Bonne compr√©hension g√©n√©rale. Les calculs de probabilit√©s conditionnelles sont bien ma√Ætris√©s. Travaille la loi binomiale.",
    tags: ["Probas", "Calcul"], noteClass: "ok" },
  { name: "DS D√©rivation", date: "15 jan 2025", note: 17, max: 20,
    comment: "Excellent ! Calculs propres, r√©daction parfaite. Continue comme √ßa.",
    tags: ["D√©rivation", "Excellent"], noteClass: "good" },
  { name: "DS Variables al√©atoires", date: "10 jan 2025", note: 11, max: 20,
    comment: "Des lacunes sur les esp√©rances et variances. On a retravaill√© √ßa ensemble. Repasse les exercices niveau 2.",
    tags: ["Variables al√©atoires", "√Ä retravailler"], noteClass: "bad" },
];

const WEEK_PLAN = [
  { day: "LUN", tasks: [] },
  { day: "MAR", tasks: [{ text: "Vid√©o Limites (20 min)", type: "cours" }] },
  { day: "MER", tasks: [{ text: "Exercices Limites niv.1 (5 exos)", type: "exo" }] },
  { day: "JEU", tasks: [{ text: "Fiche m√©thode √† relire", type: "revise" }] },
  { day: "VEN", tasks: [{ text: "Exercices niv.2 (3 exos)", type: "exo" }] },
  { day: "SAM", tasks: [{ text: "Cours particulier 14h-15h30", type: "cours" }, { text: "√âtude 2h (16h-18h)", type: "revise" }] },
  { day: "DIM", tasks: [{ text: "Organisation semaine + r√©visions libres", type: "revise" }] },
];

const OBJECTIFS = [
  { text: "Regarder la vid√©o sur les limites infinies", done: true },
  { text: "Lire la fiche m√©thode Partie 2", done: true },
  { text: "Faire les 5 exercices niveau 1", done: false },
  { text: "Faire les 3 exercices niveau 2", done: false },
  { text: "Pr√©parer les questions pour le cours de samedi", done: false },
];

// ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const student = JSON.parse(sessionStorage.getItem('student') || 'null');
if (!student) { window.location.href = 'login.html'; }

// Fill student info
document.getElementById('sidebarName').textContent = student?.name || '√âl√®ve';
document.getElementById('sidebarAvatar').textContent = (student?.name || 'E')[0].toUpperCase();

// Week badge
const now = new Date();
const weekStart = new Date(now);
weekStart.setDate(now.getDate() - now.getDay() + 1);
const opts = { day: 'numeric', month: 'long' };
document.getElementById('weekBadge').textContent =
  `Semaine du ${weekStart.toLocaleDateString('fr-FR', opts)}`;

function logout() {
  sessionStorage.removeItem('student');
  window.location.href = 'login.html';
}

// ‚îÄ‚îÄ PANEL NAVIGATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const panelMeta = {
  dashboard:  { title: 'Tableau de bord',   sub: `Bienvenue ${student?.name} üéØ` },
  cours:      { title: 'Mes cours',          sub: 'Tous les chapitres du programme' },
  replays:    { title: 'Replays',            sub: 'Tes s√©ances enregistr√©es' },
  evals:      { title: 'Mes √©valuations',    sub: 'Historique et analyses' },
  agenda:     { title: 'Mon agenda',         sub: 'Planning et prochaine s√©ance' },
  objectifs:  { title: 'Objectifs',          sub: 'Tes t√¢ches de la semaine' },
};

function showPanel(id) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.getElementById('panel-' + id).classList.add('active');
  event.currentTarget.classList.add('active');
  const meta = panelMeta[id];
  document.getElementById('panelTitle').textContent = meta.title;
  document.getElementById('panelSub').textContent   = meta.sub;
}

// ‚îÄ‚îÄ RENDER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// Week plan
const wp = document.getElementById('weekPlan');
const today = ['DIM','LUN','MAR','MER','JEU','VEN','SAM'][new Date().getDay()];
WEEK_PLAN.forEach(d => {
  const row = document.createElement('div');
  row.className = 'day-row' + (d.day === today ? ' today' : '');
  const tasks = d.tasks.length
    ? d.tasks.map(t => `<span class="task-pill ${t.type}"><span class="dot"></span>${t.text}</span>`).join('')
    : `<span style="font-size:12px;color:var(--text-muted);">Repos</span>`;
  row.innerHTML = `<div class="day-label">${d.day}</div><div class="day-tasks">${tasks}</div>`;
  wp.appendChild(row);
});

// Quick objectives (dashboard)
const qo = document.getElementById('quickObj');
OBJECTIFS.slice(0,3).forEach((o, i) => {
  const el = document.createElement('div');
  el.className = 'obj-item';
  el.innerHTML = `<div class="obj-check ${o.done ? 'done' : 'pending'}">${o.done ? '‚úì' : ''}</div>
                  <span class="obj-text ${o.done ? 'done' : ''}">${o.text}</span>`;
  qo.appendChild(el);
});

// Chapters
const cl = document.getElementById('chapterList');
CHAPTERS.forEach(ch => {
  const statusLabel = { done: 'Termin√© ‚úì', current: 'En cours', locked: '√Ä venir' }[ch.status];
  const el = document.createElement('a');
  el.className = 'chapter-item';
  el.href = ch.url;
  el.innerHTML = `
    <div class="chapter-num">${ch.num}</div>
    <div class="chapter-info">
      <div class="chapter-name">${ch.name}</div>
      <div class="chapter-meta">${ch.meta}</div>
    </div>
    <span class="chapter-status status-${ch.status}">${statusLabel}</span>
    <span class="chapter-arrow">‚Üí</span>`;
  cl.appendChild(el);
});

// Replays
function renderReplays(containerId, limit) {
  const container = document.getElementById(containerId);
  const list = limit ? REPLAYS.slice(0, limit) : REPLAYS;
  list.forEach(r => {
    const el = document.createElement('a');
    el.className = 'replay-item';
    el.href = '#';
    el.onclick = () => alert('Lien vid√©o Google Meet/Drive √† configurer dans le code !');
    el.innerHTML = `
      <div class="replay-thumb">${r.icon}</div>
      <div class="replay-info">
        <div class="replay-title">${r.title}</div>
        <div class="replay-meta">${r.date}</div>
      </div>
      <span class="replay-duration">${r.duration}</span>`;
    container.appendChild(el);
  });
}
renderReplays('dashReplays', 3);
renderReplays('allReplays');

// Evals
const el2 = document.getElementById('evalList');
EVALS.forEach(e => {
  const div = document.createElement('div');
  div.className = 'eval-item';
  div.innerHTML = `
    <div class="eval-header">
      <div>
        <div class="eval-name">${e.name}</div>
        <div class="eval-date">${e.date}</div>
      </div>
      <div class="eval-note ${e.noteClass}">${e.note}/${e.max}</div>
    </div>
    <div class="eval-comment">${e.comment}</div>
    <div class="eval-tags">${e.tags.map(t => `<span class="eval-tag">${t}</span>`).join('')}</div>`;
  el2.appendChild(div);
});

// Full objectives
const ol = document.getElementById('objList');
OBJECTIFS.forEach((o, i) => {
  const el = document.createElement('div');
  el.className = 'obj-item';
  el.innerHTML = `<div class="obj-check ${o.done ? 'done' : 'pending'}" id="obj-${i}">${o.done ? '‚úì' : ''}</div>
                  <span class="obj-text ${o.done ? 'done' : ''}" id="obj-text-${i}">${o.text}</span>`;
  el.querySelector('.obj-check').addEventListener('click', function() {
    const isDone = this.classList.contains('done');
    this.classList.toggle('done', !isDone);
    this.classList.toggle('pending', isDone);
    this.textContent = isDone ? '' : '‚úì';
    document.getElementById('obj-text-' + i).className = 'obj-text' + (isDone ? '' : ' done');
  });
  ol.appendChild(el);
});
</script>
</body>
</html>
